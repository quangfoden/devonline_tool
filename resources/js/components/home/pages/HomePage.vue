<template>
  <!-- <TopBar /> -->

  <header class="header" id="header">
    <div class="header__container">
      <div class="header__logo">
        <a href="#" class="header__logo-link">
          <span class="header__logo-icon">‚ú¶</span>
          <span class="header__logo-text">L∆∞u Gi·ªØ Y√™u Th∆∞∆°ng</span>
        </a>
      </div>

      <nav class="header__nav">
        <button class="header__toggle" aria-label="Toggle menu" id="menuToggle">
          <span class="header__toggle-line"></span>
          <span class="header__toggle-line"></span>
          <span class="header__toggle-line"></span>
        </button>

        <ul class="header__menu" id="menu">
          <li class="header__menu-item">
            <a href="#home" class="header__menu-link header__menu-link--active">Trang ch·ªß</a>
          </li>
          <li class="header__menu-item">
            <a href="#templates" class="header__menu-link">M·∫´u thi·ªáp</a>
          </li>
          <li class="header__menu-item">
            <a href="#demo" class="header__menu-link">Demo</a>
          </li>
          <li class="header__menu-item">
            <a href="#create" class="header__menu-link header__menu-link--cta">T·∫°o thi·ªáp</a>
          </li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- Hero Section -->
  <section class="hero" id="home">
    <div class="hero__background">
      <div class="hero__gradient hero__gradient--1"></div>
      <div class="hero__gradient hero__gradient--2"></div>
      <div class="hero__gradient hero__gradient--3"></div>
      <div class="hero__particle hero__particle--1"></div>
      <div class="hero__particle hero__particle--2"></div>
      <div class="hero__particle hero__particle--3"></div>
    </div>

    <div class="hero__container">
      <div class="hero__content">
        <h1 class="hero__title">
          <span class="hero__title-line hero__title-line--1">L∆∞u gi·ªØ nh·ªØng</span>
          <span class="hero__title-line hero__title-line--2">kho·∫£nh kh·∫Øc y√™u th∆∞∆°ng</span>
          <span class="hero__title-line hero__title-line--3">b·∫±ng m·ªôt t·∫•m thi·ªáp ri√™ng</span>
        </h1>

        <p class="hero__subtitle">
          M·ªói l·ªùi ch√∫c ƒë·ªÅu l√† m·ªôt m√≥n qu√† t·ª´ tr√°i tim. H√£y bi·∫øn nh·ªØng c·∫£m x√∫c c·ªßa b·∫°n th√†nh nh·ªØng t·∫•m thi·ªáp ƒë·ªôc ƒë√°o,
          mang ƒë·∫≠m d·∫•u ·∫•n c√° nh√¢n v√† t√¨nh c·∫£m ch√¢n th√†nh.
        </p>

        <div class="hero__actions">
          <a href="#templates" class="button button--primary button--large">
            <span class="button__text">Kh√°m ph√° c√°c m·∫´u</span>
            <span class="button__icon">‚Üí</span>
          </a>
        </div>
      </div>

      <div class="hero__decorations">
        <div class="hero__decoration hero__decoration--heart-1">‚ô•</div>
        <div class="hero__decoration hero__decoration--heart-2">‚ô•</div>
        <div class="hero__decoration hero__decoration--star-1">‚ú¶</div>
        <div class="hero__decoration hero__decoration--star-2">‚ú¶</div>
      </div>
    </div>
  </section>

  <!-- Templates Section -->
  <section class="templates" id="templates">
    <div class="templates__container">
      <div class="templates__header">
        <h2 class="templates__title">
          <span class="templates__title-accent">B·ªô s∆∞u t·∫≠p</span> m·∫´u thi·ªáp ƒë·∫∑c bi·ªát
        </h2>
        <p class="templates__description">
          T·ª´ng m·∫´u thi·ªáp ƒë∆∞·ª£c thi·∫øt k·∫ø t·ªâ m·ªâ, mang ƒë·∫øn tr·∫£i nghi·ªám c·∫£m x√∫c ƒë·ªôc ƒë√°o cho m·ªói d·ªãp ƒë·∫∑c bi·ªát
        </p>
      </div>

      <div class="templates__grid">
        <!-- Birthday Template -->
        <article class="template-card">
          <div class="template-card__preview">
            <div class="template-card__gradient template-card__gradient--birthday"></div>
            <div class="template-card__icon">üéÇ</div>
          </div>
          <div class="template-card__content">
            <h3 class="template-card__title">Thi·ªáp Sinh Nh·∫≠t</h3>
            <p class="template-card__description">
              G·ª≠i g·∫Øm nh·ªØng l·ªùi ch√∫c √Ω nghƒ©a nh·∫•t trong ng√†y ƒë·∫∑c bi·ªát. T·ª´ phong c√°ch t·ªëi gi·∫£n ƒë·∫øn r·ª±c r·ª° s·∫Øc m√†u.
            </p>
            <div class="template-card__actions">
              <a href="#demo" class="button button--secondary button--small">
                <span class="button__text">Xem demo</span>
              </a>
              <a href="#create" class="button button--primary button--small">
                <span class="button__text">T·∫°o thi·ªáp</span>
              </a>
            </div>
          </div>
        </article>

        <!-- New Year Template -->
        <article class="template-card">
          <div class="template-card__preview">
            <div class="template-card__gradient template-card__gradient--newyear"></div>
            <div class="template-card__icon">üéä</div>
          </div>
          <div class="template-card__content">
            <h3 class="template-card__title">Thi·ªáp NƒÉm M·ªõi</h3>
            <p class="template-card__description">
              Ch√†o ƒë√≥n nƒÉm m·ªõi v·ªõi nh·ªØng l·ªùi ch√∫c t∆∞∆°i ƒë·∫πp v√† hy v·ªçng. Thi·∫øt k·∫ø r·ª±c r·ª°, tr√†n ƒë·∫ßy nƒÉng l∆∞·ª£ng.
            </p>
            <div class="template-card__actions">
              <a href="#demo" class="button button--secondary button--small">
                <span class="button__text">Xem demo</span>
              </a>
              <a href="#create" class="button button--primary button--small">
                <span class="button__text">T·∫°o thi·ªáp</span>
              </a>
            </div>
          </div>
        </article>

        <!-- Women's Day Template -->
        <article class="template-card">
          <div class="template-card__preview">
            <div class="template-card__gradient template-card__gradient--womensday"></div>
            <div class="template-card__icon">üå∏</div>
          </div>
          <div class="template-card__content">
            <h3 class="template-card__title">Thi·ªáp 20/10</h3>
            <p class="template-card__description">
              Tri √¢n nh·ªØng ng∆∞·ªùi ph·ª• n·ªØ ƒë·∫∑c bi·ªát trong cu·ªôc ƒë·ªùi. Thi·∫øt k·∫ø nh·∫π nh√†ng, thanh l·ªãch v√† ƒë·∫ßy c·∫£m x√∫c.
            </p>
            <div class="template-card__actions">
              <a href="#demo" class="button button--secondary button--small">
                <span class="button__text">Xem demo</span>
              </a>
              <a href="#create" class="button button--primary button--small">
                <span class="button__text">T·∫°o thi·ªáp</span>
              </a>
            </div>
          </div>
        </article>

        <!-- Valentine Template -->
        <article class="template-card">
          <div class="template-card__preview">
            <div class="template-card__gradient template-card__gradient--valentine"></div>
            <div class="template-card__icon">üíù</div>
          </div>
          <div class="template-card__content">
            <h3 class="template-card__title">Trang T√¨nh Y√™u</h3>
            <p class="template-card__description">
              T·ªè b√†y t√¨nh c·∫£m v·ªõi ng∆∞·ªùi th∆∞∆°ng y√™u. Thi·∫øt k·∫ø l√£ng m·∫°n, ng·ªçt ng√†o, ƒë·∫ßy nh·ªØng chi ti·∫øt tinh t·∫ø.
            </p>
            <div class="template-card__actions">
              <a href="#demo" class="button button--secondary button--small">
                <span class="button__text">Xem demo</span>
              </a>
              <a href="#create" class="button button--primary button--small">
                <span class="button__text">T·∫°o thi·ªáp</span>
              </a>
            </div>
          </div>
        </article>

        <!-- Anniversary Template -->
        <article class="template-card">
          <div class="template-card__preview">
            <div class="template-card__gradient template-card__gradient--anniversary"></div>
            <div class="template-card__icon">üíç</div>
          </div>
          <div class="template-card__content">
            <h3 class="template-card__title">K·ª∑ Ni·ªám ƒê·∫∑c Bi·ªát</h3>
            <p class="template-card__description">
              ƒê√°nh d·∫•u nh·ªØng c·ªôt m·ªëc quan tr·ªçng. T·ª´ k·ª∑ ni·ªám t√¨nh y√™u ƒë·∫øn nh·ªØng d·ªãp ƒë√°ng nh·ªõ trong cu·ªôc ƒë·ªùi.
            </p>
            <div class="template-card__actions">
              <a href="#demo" class="button button--secondary button--small">
                <span class="button__text">Xem demo</span>
              </a>
              <a href="#create" class="button button--primary button--small">
                <span class="button__text">T·∫°o thi·ªáp</span>
              </a>
            </div>
          </div>
        </article>

        <!-- Thank You Template -->
        <article class="template-card">
          <div class="template-card__preview">
            <div class="template-card__gradient template-card__gradient--thankyou"></div>
            <div class="template-card__icon">üôè</div>
          </div>
          <div class="template-card__content">
            <h3 class="template-card__title">L·ªùi C·∫£m ∆†n</h3>
            <p class="template-card__description">
              B√†y t·ªè l√≤ng bi·∫øt ∆°n ch√¢n th√†nh. Thi·∫øt k·∫ø ·∫•m √°p, ch√¢n t√¨nh, khi·∫øn ng∆∞·ªùi nh·∫≠n c·∫£m th·∫•y ƒë∆∞·ª£c tr√¢n tr·ªçng.
            </p>
            <div class="template-card__actions">
              <a href="#demo" class="button button--secondary button--small">
                <span class="button__text">Xem demo</span>
              </a>
              <a href="#create" class="button button--primary button--small">
                <span class="button__text">T·∫°o thi·ªáp</span>
              </a>
            </div>
          </div>
        </article>
      </div>
    </div>
  </section>

  <!-- How It Works Section -->
  <section class="how-it-works" id="demo">
    <div class="how-it-works__container">
      <div class="how-it-works__header">
        <h2 class="how-it-works__title">
          Ch·ªâ ba b∆∞·ªõc ƒë∆°n gi·∫£n
        </h2>
        <p class="how-it-works__subtitle">
          T·∫°o thi·ªáp ch√∫c c·ªßa ri√™ng b·∫°n ch·ªâ trong v√†i ph√∫t
        </p>
      </div>

      <div class="how-it-works__steps">
        <div class="step">
          <div class="step__number">
            <span class="step__number-text">01</span>
          </div>
          <div class="step__icon">
            <div class="step__icon-inner">üé®</div>
          </div>
          <h3 class="step__title">Ch·ªçn m·∫´u y√™u th√≠ch</h3>
          <p class="step__description">
            Duy·ªát qua b·ªô s∆∞u t·∫≠p ƒëa d·∫°ng v√† ch·ªçn m·∫´u thi·ªáp ph√π h·ª£p v·ªõi d·ªãp ƒë·∫∑c bi·ªát c·ªßa b·∫°n
          </p>
        </div>

        <div class="step">
          <div class="step__number">
            <span class="step__number-text">02</span>
          </div>
          <div class="step__icon">
            <div class="step__icon-inner">‚úçÔ∏è</div>
          </div>
          <h3 class="step__title">Nh·∫≠p l·ªùi ch√∫c & h√¨nh ·∫£nh</h3>
          <p class="step__description">
            Vi·∫øt nh·ªØng l·ªùi ch√∫c t·ª´ tr√°i tim, th√™m ·∫£nh k·ª∑ ni·ªám ƒë·ªÉ thi·ªáp th√™m √Ω nghƒ©a v√† c√° nh√¢n
          </p>
        </div>

        <div class="step">
          <div class="step__number">
            <span class="step__number-text">03</span>
          </div>
          <div class="step__icon">
            <div class="step__icon-inner">üíå</div>
          </div>
          <h3 class="step__title">T·∫°o link & chia s·∫ª</h3>
          <p class="step__description">
            Nh·∫≠n link thi·ªáp ƒë·ªôc quy·ªÅn v√† g·ª≠i ƒë·∫øn ng∆∞·ªùi th∆∞∆°ng y√™u qua b·∫•t k·ª≥ n·ªÅn t·∫£ng n√†o
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Emotional Value Section -->
  <section class="value">
    <div class="value__background">
      <div class="value__sparkle value__sparkle--1">‚ú¶</div>
      <div class="value__sparkle value__sparkle--2">‚ú¶</div>
      <div class="value__sparkle value__sparkle--3">‚ú¶</div>
      <div class="value__heart value__heart--1">‚ô•</div>
      <div class="value__heart value__heart--2">‚ô•</div>
    </div>

    <div class="value__container">
      <div class="value__content">
        <p class="value__quote">
          "Trong th·ªùi ƒë·∫°i k·ªπ thu·∫≠t s·ªë, m·ªôt l·ªùi ch√∫c ch√¢n th√†nh v·∫´n c√≥ s·ª©c m·∫°nh k·ª≥ di·ªáu ƒë·ªÉ ch·∫°m ƒë·∫øn tr√°i tim, t·∫°o n√™n
          kho·∫£nh kh·∫Øc kh√≥ qu√™n v√† gi·ªØ m√£i nh·ªØng k·ª∑ ni·ªám ƒë·∫πp."
        </p>

        <div class="value__features">
          <div class="value__feature">
            <div class="value__feature-icon">üéÅ</div>
            <p class="value__feature-text">Ho√†n to√†n mi·ªÖn ph√≠</p>
          </div>
          <div class="value__feature">
            <div class="value__feature-icon">üîí</div>
            <p class="value__feature-text">Ri√™ng t∆∞ & b·∫£o m·∫≠t</p>
          </div>
          <div class="value__feature">
            <div class="value__feature-icon">‚ú®</div>
            <p class="value__feature-text">Thi·∫øt k·∫ø ƒë·ªôc ƒë√°o</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Final CTA Section -->
  <section class="cta" id="create">
    <div class="cta__container">
      <div class="cta__content">
        <h2 class="cta__title">
          M·ªói l·ªùi ch√∫c ƒë·ªÅu x·ª©ng ƒë√°ng<br>ƒë∆∞·ª£c tr√¢n tr·ªçng
        </h2>
        <p class="cta__subtitle">
          H√£y b·∫Øt ƒë·∫ßu t·∫°o thi·ªáp c·ªßa ri√™ng b·∫°n ngay h√¥m nay
        </p>
        <div class="cta__actions">
          <a href="#templates" class="button button--primary button--large button--glow">
            <span class="button__text">B·∫Øt ƒë·∫ßu t·∫°o thi·ªáp</span>
            <span class="button__icon">‚Üí</span>
          </a>
        </div>
      </div>
    </div>
  </section>


  <FooterSection />
</template>
<script>
import TopBar from "@components/home/partials/TopBar.vue";
// import slideSection from "@components/home/sections/home/slideSection.vue";
// import AboutSection from "@components/home/AboutSection.vue";
// import NewsSectione from "@components/home/NewsSectione.vue";
import FooterSection from "@components/home/sections/FooterSection.vue";
// import ProductsSection from "@components/home/ProductsSection.vue";

export default {
  components: {
    TopBar,
    // slideSection,
    // AboutSection,
    // NewsSectione,
    // ProductsSection,
    FooterSection
  },

  data() {
    return {
      isScrolled: false,
      isMenuOpen: false,
      isLoaded: false,
      activeSection: '',
      menuItems: [
        { id: 'hero', text: 'Trang ch·ªß' },
        { id: 'templates', text: 'M·∫´u thi·ªáp' },
        { id: 'how-it-works', text: 'C√°ch ho·∫°t ƒë·ªông' },
        { id: 'pricing', text: 'B·∫£ng gi√°' }
      ],
      observers: [] // L∆∞u tr·ªØ c√°c observer ƒë·ªÉ d·ªçn d·∫πp sau n√†y

    };
  },

  mounted() {
    this.isLoaded = true;

    // Kh·ªüi t·∫°o c√°c ch·ª©c nƒÉng
    window.addEventListener('scroll', this.handleScrollHeader);
    window.addEventListener('orientationchange', this.handleOrientationChange);
    document.addEventListener('click', this.handleClickOutside);

    this.setupScrollAnimations();
    this.setupActiveMenuLink();

    console.log('%c‚ú¶ L∆∞u Gi·ªØ Y√™u Th∆∞∆°ng ‚ú¶', 'font-size: 20px; color: #E8577F; font-weight: bold;');
  },

  beforeDestroy() {
    // Quan tr·ªçng: G·ª° b·ªè c√°c event listener ƒë·ªÉ tr√°nh r√≤ r·ªâ b·ªô nh·ªõ
    window.removeEventListener('scroll', this.handleScrollHeader);
    window.removeEventListener('orientationchange', this.handleOrientationChange);
    document.removeEventListener('click', this.handleClickOutside);

    this.observers.forEach(obs => obs.disconnect());
  },
  methods: {
    // 1. X·ª≠ l√Ω Header khi Scroll
    handleScrollHeader() {
      this.isScrolled = window.scrollY > 50;
    },

    // 2. X·ª≠ l√Ω Mobile Menu
    toggleMenu() {
      this.isMenuOpen = !this.isMenuOpen;
      document.body.style.overflow = this.isMenuOpen ? 'hidden' : '';
    },

    closeMenu() {
      this.isMenuOpen = false;
      document.body.style.overflow = '';
    },

    handleClickOutside(e) {
      const menu = document.getElementById('menu');
      const toggle = document.getElementById('menuToggle');
      if (this.isMenuOpen && menu && !menu.contains(e.target) && !toggle.contains(e.target)) {
        this.closeMenu();
      }
    },

    handleOrientationChange() {
      if (this.isMenuOpen) this.closeMenu();
    },

    // 3. Smooth Scroll
    handleAnchorClick(e, id) {
      e.preventDefault();
      this.closeMenu();

      const target = document.getElementById(id);
      if (target) {
        const headerHeight = this.$refs.header.offsetHeight;
        const targetPosition = target.getBoundingClientRect().top + window.scrollY - headerHeight;

        window.scrollTo({
          top: targetPosition,
          behavior: 'smooth'
        });
      }
    },

    // 4. Scroll Animations (Intersection Observer)
    setupScrollAnimations() {
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('is-visible');
            observer.unobserve(entry.target);
          }
        });
      }, { threshold: 0.1, rootMargin: '0px 0px -50px 0px' });

      const selectors = ['.templates__header', '.template-card', '.step', '.value__content', '.cta__content'];
      selectors.forEach(selector => {
        document.querySelectorAll(selector).forEach(el => observer.observe(el));
      });

      this.observers.push(observer);
    },

    // 5. Active Link Tracking
    setupActiveMenuLink() {
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            this.activeSection = entry.target.id;
          }
        });
      }, { threshold: 0.3, rootMargin: '-100px 0px -50% 0px' });

      document.querySelectorAll('section[id]').forEach(section => observer.observe(section));

      this.observers.push(observer);
    }
  }
};
</script>
